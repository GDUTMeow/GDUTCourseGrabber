<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GDUT抢课助手 | GamerNoTitle</title>
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="stylesheet" href="/styles.css">
</head>

<body>
    <!-- 主对话框 -->
    <dialog id="dialog" class="dialog">
        <div class="dialog-body">
            <div class="dialog-header">
                <div class="dialog-title">title</div>
                <div class="dialog-close" id="dialog-close">&times;</div>
            </div>
            <div class="dialog-content">
                <!-- 动态内容 -->
            </div>
        </div>
    </dialog>

    <div class="container">
        <img src="/favicon.png" height="200px" width="200px" alt="Logo">
        <h1>GDUT抢课助手：配置管理</h1>
        <p>Github开源地址：<a href="https://github.com/GDUTMeow/GDUTCourseGrabber" target="_blank">https://github.com/GDUTMeow/GDUTCourseGrabber</a></p>
        <br>
        <form id="config-form" method="post">
            <div class="form-group">
                <label for="session_id">JSESSIONID:</label>
                <input type="text" id="session_id" name="session_id" placeholder="请输入JSESSIONID" required>
                <button type="button" class="btn" id="fetch-courses-btn" onclick="fetchCourses()">获取课程列表</button>
            </div>
            <h3>已选课程列表</h3>
            <p>删除任意一门课程后，请点击更新配置来刷新配置文件，否则配置不做保存！</p>
            <div id="courses-container">
                <!-- 已选课程列表，需要访问 GET /api/grabber/ 获取 -->
            </div>
            <button type="button" class="btn add-course">添加自定义课程 +</button>
            <button type="button" class="btn" id="fetch-config-btn">修改当前配置</button>
            <button type="submit" class="btn">更新配置</button>
        </form>

        <h3>可选课程列表</h3>
        <p>强烈建议先去点击详细信息看看你要选择的课程会不会跟你的课表冲突再来选择！！！需要筛选的话，把下面的数量调成1000，然后用<kbd>Ctrl</kbd>+<kbd>F</kbd>来搜索</p>
        <div id="available-courses">
            <table>
                <thead>
                    <tr>
                        <th>课程ID</th>
                        <th>课程名称(学分)</th>
                        <th>注意事项</th>
                        <th>老师名字</th>
                        <th>人数限制</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody id="available-courses-list">
                    <!-- 可选课程列表，通过访问 GET /api/eas/courses 获取 -->
                </tbody>
            </table>
            <div class="pagination">
                <button class="btn page-btn" id="prev-page" disabled>&lt;</button>
                <span id="page-info">第 <span id="current-page">1</span> 页，共 <span id="total-pages">1</span> 页</span>
                <button class="btn page-btn" id="next-page">&gt;</button>
                <select id="page-size" class="page-size-select">
                    <option value="10">10条/页</option>
                    <option value="20">20条/页</option>
                    <option value="50">50条/页</option>
                    <option value="100">100条/页</option>
                    <option value="1000">1000条/页</option>
                </select>
            </div>
        </div>

        <br>
        <div class="grab-course-config">
            <label for="start-time">抢课开始时间:</label>
            <input type="datetime-local" id="start-time" name="start_time">

            <label for="offset">提前抢课时间 (秒):</label>
            <input type="number" class="offset" id="offset" name="offset" min="0" value="300">

            <button type="button" class="btn" id="save-config-btn">保存配置</button>
        </div>
        <div class="control-buttons">
            <button type="button" class="btn" id="start-qk-btn">开始抢课</button>
            <button type="button" class="btn" id="stop-qk-btn">停止抢课</button>
        </div>
        <h3>日志</h3>
        <p>日志只显示最后100行，完整日志请查看程序 logs 目录下的 latest.log</p>
        <div class="logs" id="log-shell">
            <pre id="log-container">{{ logs | safe }}</pre>
        </div>
    </div>

    <script src="/scripts.js"></script>
</body>

</html>
